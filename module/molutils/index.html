<!--
  This Basic theme serves as an example for how to create other
  themes by demonstrating the features with minimal HTML and CSS.
  Comments like this will be through the code to explain briefly
  what each feature is and point you to the MkDocs documentation
  to find out more.
-->
<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!--
    The page_title contains the title for a page as shown in the navigation.
    Site name contains the name as defined in the mkdocs.yml
  -->
  <title>molutils - PiNNAcLe</title>

  <link rel="stylesheet" href="../../css/theme.css">
  <link rel="stylesheet" href="../../css/notebook.css">
  <link rel="stylesheet" href="../../css/pygments.css">
  <link rel="icon" href="data:,">
  

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,600;1,400;1,700&family=Noto+Sans:ital,wght@0,400;0,600;1,400;1,600&display=swap" rel="stylesheet">
  <script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
  crossorigin="anonymous"></script>

  <script>
    var base_url = "../..";
    $(document).ready(function(){
          $('table').wrap('<div class="table-wrapper"></div>');
    });
  </script>

  <script src="../../js/mike.js"></script>

  
    <script src="../../js/mathjax.js"></script>
  
    <script src="../../search/main.js"></script>
  

</head>

<body>
  <header class="header">
    <ul>
      <li id="logo">
        <a href="../..">PiNN<span>AcLe</span></a>
      </li>
      
      
  <li  class="tab" >
    <a href="../.." class="">
      Home
    </a>
  </li>

      
      
  
  <li  class="tab" >
    <a href="../../tutorial/get_started/">
      Tutorial
    </a>
  </li>

      
      
  
  <li class="active tab" >
    <a href="../../manual/">
      Manual
    </a>
  </li>

      
      
  
  <li  class="tab" >
    <a href="../../profiles/overview/">
      Profiles
    </a>
  </li>

      
      <li class="tools">
        
          <a id="nav-toggle" class="tool" onclick="nav_toggle()">
        
          <svg><use xlink:href="../../svg/sprite.svg#menu-2"></use></svg>
        </a>
        <script>
           function nav_toggle() {
               var bar = document.getElementById("tab-bar");
               if (bar.style.display === "none") {
                   bar.style.display = "block";
               } else {
                   bar.style.display = "none";
               }
           }
          function nav_reset() {
              var bar = document.getElementById("tab-bar");
              if (window.innerWidth>950){
                  bar.style.display = "block";
              } else {
                  bar.style.display = "none";
              }
          }
          window.onresize = nav_reset;
        </script>
        
        
        <a class="tool" href="https://github.com/teoroo-cmc/pinnacle/">
          <svg><use xlink:href="../../svg/sprite.svg#brand-github"></use></svg>
          <span>teoroo-cmc/pinnacle</span>
        </a>
        
      </li>
    </ul>
  </header>


  <div id="main">
    <div id="tab-bar">
      <ul>
      
       
  <li  class="tab" >
    <a href="../.." class="">
      Home
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
             </ul>
           </div>
         
      
       
  
  <li  class="tab" >
    <a href="../../tutorial/get_started/">
      Tutorial
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
             </ul>
           </div>
         
      
       
  
  <li class="active tab" >
    <a href="../../manual/">
      Manual
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
                 
                   
    <li >
      <a href="../../manual/" class="">
        Overview
      </a>
    </li>

                 
                   
  <a class="nav-title" > Recipes </a>
  
    
    <li >
      <a href="../../recipe/acle/" class="">
        AcLe
      </a>
    </li>

  

                 
                   
  <a class="nav-title" > Modules </a>
  
    
    <li >
      <a href="../tips/" class="">
        TIPS
      </a>
    </li>

  
    
    <li >
      <a href="../pinn/" class="">
        PiNN
      </a>
    </li>

  
    
    <li >
      <a href="../cp2k/" class="">
        CP2K
      </a>
    </li>

  
    
    <li >
      <a href="../ase/" class="">
        ASE
      </a>
    </li>

  
    
    <li >
      <a href="../dftb/" class="">
        DFTB+
      </a>
    </li>

  
    
    <li class="active">
      <a href="./" class="">
        molutils
      </a>
    </li>

  
    
    <li >
      <a href="../lammps/" class="">
        LAMMPS
      </a>
    </li>

  

                 
               
             </ul>
           </div>
         
      
       
  
  <li  class="tab" >
    <a href="../../profiles/overview/">
      Profiles
    </a>
  </li>

         
           <div class="nav-bar">
             <ul>
               
             </ul>
           </div>
         
      
      </ul>
    </div>

    <div id="content">
      <h1 id="molecule-building-utilities">Molecule Building Utilities</h1>
<p>This module implements workflows related to the building of geometries or
building geometries as starting points of simulations.</p>
<h2 id="mol2box">mol2box</h2>
<p>The <strong>tag</strong> parameter should be a semicolon-separated list of SMILES strings,
with the number of molecules indicated by a number, separated with comma. For
example, <code>o,64</code> means a box with 64 water molecule, and <code>O,32;COO,32</code> means an
equimolar mixture of water and ethonol.</p>
<p>The <strong>box</strong> parameter can be a single float for a cubic box, a
semicolon-separated list for an orthogonal cell.</p>
<p>The <strong>seed</strong> parameter specified the random number generator used in packmol.</p>
<p>The 3D conformation will be build and hydrogen atoms added by <a href="https://openbabel.org/docs/dev/Command-line_tools/babel.html#options">openbabel</a>. The
molecules will then be packed into the specified box with <a href="https://m3g.github.io/packmol/download.shtml">packmol</a>.</p>
<h3 id="input-channels">Input channels</h3>
<table>
<thead>
<tr>
<th>Channel</th>
<th>Type</th>
<th>i/o[idx]</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td><code>val</code></td>
<td><code>in[0]</code></td>
<td>an id to identify the process</td>
</tr>
<tr>
<td><code>tag</code></td>
<td><code>val</code></td>
<td><code>in[1]</code></td>
<td>a string specifying the geometry</td>
</tr>
<tr>
<td><code>box</code></td>
<td><code>val</code></td>
<td><code>in[2]</code></td>
<td>a string specifying the box size</td>
</tr>
<tr>
<td><code>seed</code></td>
<td><code>val</code></td>
<td><code>in[3]</code></td>
<td>random number generator seed</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>val</code></td>
<td><code>out.*[0]</code></td>
<td>same as input</td>
</tr>
<tr>
<td><code>geo</code></td>
<td><code>file</code></td>
<td><code>out.geo[1]</code></td>
<td>the geometry packed with packmol</td>
</tr>
<tr>
<td><code>log</code></td>
<td><code>file</code></td>
<td><code>out.log[1]</code></td>
<td>packmol input and logs</td>
</tr>
</tbody>
</table>
<details>
<summary>Source code</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">nextflow</span><span class="o">.</span><span class="na">enable</span><span class="o">.</span><span class="na">dsl</span><span class="o">=</span><span class="mi">2</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">params</span><span class="o">.</span><span class="na">publish</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;.&quot;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">process</span><span class="w"> </span><span class="n">mol2box</span><span class="w"> </span><span class="o">{</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="n">label</span><span class="w"> </span><span class="s1">&#39;molutils&#39;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="n">publishDir</span><span class="w"> </span><span class="s2">&quot;$params.publish/molutils/$name&quot;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">  </span><span class="nl">input:</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">name</span><span class="o">),</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">tags</span><span class="o">),</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">box</span><span class="o">),</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">seed</span><span class="o">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">  </span><span class="nl">output:</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">name</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">&quot;${name}.xyz&quot;</span><span class="o">),</span><span class="w"> </span><span class="nl">emit:</span><span class="w"> </span><span class="n">geo</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span><span class="n">tuple</span><span class="w"> </span><span class="n">val</span><span class="o">(</span><span class="n">name</span><span class="o">),</span><span class="w"> </span><span class="n">path</span><span class="o">(</span><span class="s2">&quot;packmol.{in,log}&quot;</span><span class="o">),</span><span class="w"> </span><span class="nl">emit:</span><span class="w"> </span><span class="n">logs</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">  </span><span class="nl">shell:</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">  </span><span class="s1">&#39;&#39;&#39;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="s1">  rm -rf packmol.in</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="s1">  cat &lt;&lt; EOF &gt;&gt; packmol.in</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="s1">  tolerance 2.0</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="s1">  filetype xyz</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="s1">  output !{name}.xyz</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="s1">  seed !{seed}</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="s1">  EOF</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="s1">  mols=$(echo &quot;!{tags}&quot; | tr &quot;;&quot; &quot;\\n&quot;)</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="s1">  for mol in $mols</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="s1">  do</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="s1">    IFS=, read smiles number &lt;&lt;&lt; &quot;$mol&quot;</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="s1">    obabel -h --gen3d -oxyz -:&quot;$smiles&quot; -O $smiles.xyz</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="s1">    cat &lt;&lt; EOF &gt;&gt; packmol.in</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="s1">  structure $smiles.xyz</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a><span class="s1">    number $number</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="s1">    inside cube 0. 0. 0. !{box-2.0}</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="s1">  end structure</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a><span class="s1">  EOF</span>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="s1">  done</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a><span class="s1">  packmol &lt; packmol.in &gt; packmol.log</span>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="s1">  sed -i &#39;2s/.*/Lattice=&quot;!{box} 0.0 0.0 0.0 !{box} 0.0 0.0 0.0 !{box}&quot;/&#39; !{name}.xyz</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="s1">  &#39;&#39;&#39;</span>
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a><span class="o">}</span>
</code></pre></div>
</details>
    </div>

  </div>

  <div class="page">
    <div class="page-prev">
      
      <a href="../dftb/" title="DFTB+"><span>«</span> Previous</a>
      
    </div>
    <div class="page-next">
      
      <a href="../lammps/" title="LAMMPS" />Next <span>»</span></a>
      
    </div>
  </div>

  <div class="footer">
    Built with <a href="https://www.mkdocs.org">mkdocs</a> and the <a href="https://github.com/yqshao/mkdocs-flux-theme">flux</a> theme.
  </div>
</body>
</html>